<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>ENI-Enchères</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

    <p><a th:href="@{/connexion}">S'inscrire - Se connecter</a></p>
    <p><a th:href="@{/profil}">Profil</a></p>

    <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post">
        <input type="submit" value="Se déconnecter"/>
    </form>

    <h2 th:if="${pseudo != null}">
        Bonjour <span th:text="${pseudo}"></span> !
    </h2>

    <h1>Liste des enchères</h1>
    <p>Ceci est un test pour vérifier l'accès à la fonctionnalité Afficher le détail d'une vente</p>

    <!--    <h2>Détail vente <span th:text="${vente.id}"></span></h2>-->
    <!--    <p><strong>Nom :</strong> <span th:text="${vente.nom}"></span></p>-->
    <!--    <p><strong>Description :</strong> <span th:text="${vente.description}"></span></p>-->
    <!--    <a th:href="@{/}">Retour liste</a>-->

    <!-- Mes achats -->
    <!-- Mes ventes -->

    <div class="container mt-4">
        <div class="row g-3">
            <div th:each="article : ${articles}" class="col-12 col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100">
                    <a th:href="@{/vente/{id}(id=${article.noArticle})}" class="text-decoration-none text-dark">
                        <img th:src="@{/images/{image}(image=${article.imageFilename})}"
                             class="card-img-top img-fluid"
                             style="height: 180px; object-fit: cover;"
                             th:alt="${article.nomArticle}">
                        <div class="card-body">
                            <h5 class="card-title" th:text="${article.nomArticle}">Nom produit</h5>
                            <p class="card-text">
                                | Prix : <span th:text="${article.prixVente}"></span>
                                | Début de l'enchère : <span th:text="${#temporals.format(article.dateDebutEncheres, 'dd/MM/yyyy')}"></span>
                                | Fin de l'enchère : <span th:text="${#temporals.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span>
                                | Etat : <span th:text="${article.etatVente}"></span>
                                | Vendeur : <span th:text="${article.vendeur.pseudo}"></span>
                            </p>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>